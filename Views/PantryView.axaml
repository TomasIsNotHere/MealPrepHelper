<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MealPrepHelper.ViewModels"
             x:Class="MealPrepHelper.Views.PantryView"
             x:DataType="vm:PantryViewModel">
    
    <Grid RowDefinitions="Auto, *">
        
        <Border Grid.Row="0" Background="White" Margin="20" Padding="20" CornerRadius="10" BoxShadow="0 2 10 0 #10000000">
            <StackPanel Spacing="15">
                <TextBlock Text="ðŸ›’ PÅ™idat do spiÅ¾Ã­rny" FontSize="18" FontWeight="Bold"/>
                
                <Grid ColumnDefinitions="2*, 1*, Auto, Auto" RowDefinitions="Auto, Auto">
                    
                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock Text="Surovina" FontSize="12" Foreground="Gray" Margin="0,0,0,5"/>
                        
                        <AutoCompleteBox ItemsSource="{Binding AllIngredients}" 
                                         SelectedItem="{Binding SelectedIngredient}"
                                         ValueMemberBinding="{Binding Name}"
                                         FilterMode="Contains"
                                         Watermark="ZaÄnÄ›te psÃ¡t nÃ¡zev..."
                                         HorizontalAlignment="Stretch"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="0,0,10,0">
                        <TextBlock Text="MnoÅ¾stvÃ­" FontSize="12" Foreground="Gray" Margin="0,0,0,5"/>
                        <NumericUpDown Value="{Binding AddAmount}" Minimum="0" Increment="10"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="0,18,10,0">
                        <TextBlock Text="{Binding AddUnit}" FontWeight="Bold"/>
                    </StackPanel>

                    <Button Grid.Column="3" 
                            Command="{Binding AddCommand}"
                            Content="PÅ™idat" 
                            VerticalAlignment="Bottom"
                            Background="#4CAF50" Foreground="White" FontWeight="Bold"/>
                </Grid>
            </StackPanel>
        </Border>

        <ScrollViewer Grid.Row="1" Margin="20,0,20,20">
            <ItemsControl ItemsSource="{Binding PantryItems}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,10" BoxShadow="0 1 3 0 #20000000">
                            <Grid ColumnDefinitions="*, Auto, Auto, Auto">
                                
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="16"/>
                                    <StackPanel Orientation="Horizontal" Spacing="5">
                                        <TextBlock Text="Skladem:" Foreground="Gray"/>
                                        <TextBlock Text="{Binding CurrentAmount}" FontWeight="Bold"/>
                                        <TextBlock Text="{Binding Unit}" FontWeight="Bold"/>
                                    </StackPanel>
                                </StackPanel>

                               <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0">
    <TextBlock Text="Odebrat:" FontSize="10" Foreground="Gray"/>
    
    <StackPanel Orientation="Horizontal" Spacing="10">
        
        <NumericUpDown Value="{Binding AmountToRemove}" 
                       Maximum="{Binding CurrentAmount}"
                       Minimum="0"
                       Width="130" 
                       IsEnabled="{Binding !RemoveAll}"/>

        <CheckBox IsChecked="{Binding RemoveAll}" 
                  Content="VÅ¡e" 
                  Padding="4,0,0,0"
                  VerticalAlignment="Center"/>
    </StackPanel>
</StackPanel>

                                <Button Grid.Column="2" 
                                        Command="{Binding $parent[UserControl].((vm:PantryViewModel)DataContext).RemoveCommand}"
                                        CommandParameter="{Binding}"
                                        Background="#FFEBEE" Foreground="#D32F2F"
                                        Margin="10,0,0,0" VerticalAlignment="Bottom" Height="32">
                                    <TextBlock Text="Smazat"/>
                                </Button>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>