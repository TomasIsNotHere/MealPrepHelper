<UserControl
    x:Class="MealPrepHelper.Views.PantryView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:MealPrepHelper.ViewModels"
    x:DataType="vm:PantryViewModel">

    <Grid RowDefinitions="Auto, *">

        <Border
            Grid.Row="0"
            Margin="20"
            Padding="20"
            Background="White"
            BoxShadow="0 2 10 0 #10000000"
            CornerRadius="10">
            <StackPanel Spacing="15">
                <TextBlock
                    FontSize="18"
                    FontWeight="Bold"
                    Text="ðŸ›’ PÅ™idat do spiÅ¾Ã­rny" />

                <Grid ColumnDefinitions="2*, 1*, Auto, Auto" RowDefinitions="Auto, Auto">

                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock
                            Margin="0,0,0,5"
                            FontSize="12"
                            Foreground="Gray"
                            Text="Surovina" />

                        <AutoCompleteBox
                            HorizontalAlignment="Stretch"
                            FilterMode="Contains"
                            ItemsSource="{Binding AllIngredients}"
                            SelectedItem="{Binding SelectedIngredient}"
                            ValueMemberBinding="{Binding Name}"
                            Watermark="ZaÄnÄ›te psÃ¡t nÃ¡zev..." />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="0,0,10,0">
                        <TextBlock
                            Margin="0,0,0,5"
                            FontSize="12"
                            Foreground="Gray"
                            Text="MnoÅ¾stvÃ­" />
                        <NumericUpDown
                            Increment="10"
                            Minimum="0"
                            Value="{Binding AddAmount}" />
                    </StackPanel>

                    <StackPanel
                        Grid.Column="2"
                        Margin="0,18,10,0"
                        VerticalAlignment="Center">
                        <TextBlock FontWeight="Bold" Text="{Binding AddUnit}" />
                    </StackPanel>

                    <Button
                        Grid.Column="3"
                        VerticalAlignment="Bottom"
                        Background="#4CAF50"
                        Command="{Binding AddCommand}"
                        Content="PÅ™idat"
                        FontWeight="Bold"
                        Foreground="White" />
                </Grid>
            </StackPanel>
        </Border>

        <ScrollViewer Grid.Row="1" Margin="20,0,20,20">
            <ItemsControl ItemsSource="{Binding PantryItems}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border
                            Margin="0,0,0,10"
                            Padding="15"
                            Background="White"
                            BoxShadow="0 1 3 0 #20000000"
                            CornerRadius="8">
                            <Grid ColumnDefinitions="*, Auto, Auto, Auto">

                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock
                                        FontSize="16"
                                        FontWeight="SemiBold"
                                        Text="{Binding Name}" />
                                    <StackPanel Orientation="Horizontal" Spacing="5">
                                        <TextBlock Foreground="Gray" Text="Skladem:" />
                                        <TextBlock FontWeight="Bold" Text="{Binding CurrentAmount}" />
                                        <TextBlock FontWeight="Bold" Text="{Binding Unit}" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel
                                    Grid.Column="1"
                                    Margin="10,0"
                                    VerticalAlignment="Center">
                                    <TextBlock
                                        FontSize="10"
                                        Foreground="Gray"
                                        Text="Odebrat:" />

                                    <StackPanel Orientation="Horizontal" Spacing="10">

                                        <NumericUpDown
                                            Width="130"
                                            IsEnabled="{Binding !RemoveAll}"
                                            Maximum="{Binding CurrentAmount}"
                                            Minimum="0"
                                            Value="{Binding AmountToRemove}" />

                                        <CheckBox
                                            Padding="4,0,0,0"
                                            VerticalAlignment="Center"
                                            Content="VÅ¡e"
                                            IsChecked="{Binding RemoveAll}" />
                                    </StackPanel>
                                </StackPanel>

                                <Button
                                    Grid.Column="2"
                                    Height="32"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Background="#FFEBEE"
                                    Command="{Binding $parent[UserControl].((vm:PantryViewModel)DataContext).RemoveCommand}"
                                    CommandParameter="{Binding}"
                                    Foreground="#D32F2F">
                                    <TextBlock Text="Smazat" />
                                </Button>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>
