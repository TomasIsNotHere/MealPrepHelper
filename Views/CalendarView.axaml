<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MealPrepHelper.ViewModels"
             x:Class="MealPrepHelper.Views.CalendarView"
             x:DataType="vm:CalendarViewModel">

    <Grid RowDefinitions="Auto, Auto, *">
        
        <Grid Grid.Row="0" ColumnDefinitions="Auto, *, Auto" Margin="20">
            <Button Grid.Column="0" Content="&lt;" Command="{Binding PrevMonthCommand}" Width="40"/>
            <TextBlock Grid.Column="1" Text="{Binding MonthTitle}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" FontWeight="Bold"/>
            <Button Grid.Column="2" Content="&gt;" Command="{Binding NextMonthCommand}" Width="40"/>
        </Grid>

        <UniformGrid Grid.Row="1" Columns="7" Margin="10,0,10,10">
            <TextBlock Text="Po" HorizontalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Text="Út" HorizontalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Text="St" HorizontalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Text="Čt" HorizontalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Text="Pá" HorizontalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Text="So" HorizontalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Text="Ne" HorizontalAlignment="Center" FontWeight="Bold"/>
        </UniformGrid>

        <ItemsControl Grid.Row="2" ItemsSource="{Binding Days}" Margin="10">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate><UniformGrid Columns="7"/></ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Command="{Binding $parent[UserControl].((vm:CalendarViewModel)DataContext).OpenPopupCommand}"
                            CommandParameter="{Binding}"
                            Background="Transparent" Padding="0"
                            HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                            BorderThickness="0">
                        <Border BorderBrush="#EEEEEE" BorderThickness="1" Height="60">
                            <Grid>
                                <TextBlock Text="{Binding DayNumber}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{Binding TextColor}" FontSize="16"/>
                                <Ellipse Width="6" Height="6" Fill="{Binding DotColor}" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,8" IsVisible="{Binding HasPlan}"/>
                            </Grid>
                        </Border>
                    </Button>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl>