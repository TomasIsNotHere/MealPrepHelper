<UserControl
    x:Class="MealPrepHelper.Views.ShoppingListView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:MealPrepHelper.ViewModels"
    x:DataType="vm:ShoppingListViewModel">

    <UserControl.Styles>
        <Style Selector="Border.item">
            <Setter Property="Background" Value="White" />
            <Setter Property="BoxShadow" Value="0 1 3 0 #20000000" />
        </Style>
        <Style Selector="Border.item.bought">
            <Setter Property="Background" Value="#E8F5E9" /> 
            <Setter Property="BoxShadow" Value="0 0 0 0 Transparent" /> 
        </Style>

        <Style Selector="TextBlock.text, StackPanel.info">
            <Setter Property="Opacity" Value="1.0" />
        </Style>
        <Style Selector="TextBlock.text.bought">
            <Setter Property="Opacity" Value="0.5" />
            <Setter Property="TextDecorations" Value="Strikethrough" />
        </Style>
        <Style Selector="StackPanel.info.bought">
            <Setter Property="Opacity" Value="0.5" />
        </Style>
    </UserControl.Styles>

    <Grid RowDefinitions="Auto, *, Auto">

        <Border
            Grid.Row="0"
            Margin="20"
            Padding="20"
            Background="White"
            BoxShadow="0 2 10 0 #10000000"
            CornerRadius="10">
            <StackPanel Spacing="15">
                <TextBlock
                    FontSize="18"
                    FontWeight="Bold"
                    Text="ðŸ“ NÃ¡kupnÃ­ seznam" />

                <Grid ColumnDefinitions="2*, 1*, Auto, Auto" RowDefinitions="Auto, Auto">

                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock
                            Margin="0,0,0,5"
                            FontSize="12"
                            Foreground="Gray"
                            Text="Co koupit" />
                        <AutoCompleteBox
                            HorizontalAlignment="Stretch"
                            FilterMode="Contains"
                            ItemsSource="{Binding AllIngredients}"
                            SelectedItem="{Binding SelectedIngredient}"
                            ValueMemberBinding="{Binding Name}"
                            Watermark="ZaÄnÄ›te psÃ¡t..." />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="0,0,10,0">
                        <TextBlock
                            Margin="0,0,0,5"
                            FontSize="12"
                            Foreground="Gray"
                            Text="MnoÅ¾stvÃ­" />
                        <NumericUpDown
                            Increment="10"
                            Minimum="0"
                            Value="{Binding AddAmount}" />
                    </StackPanel>

                    <StackPanel
                        Grid.Column="2"
                        Margin="0,18,10,0"
                        VerticalAlignment="Center">
                        <TextBlock FontWeight="Bold" Text="{Binding AddUnit}" />
                    </StackPanel>

                    <Button
                        Grid.Column="3"
                        VerticalAlignment="Bottom"
                        Background="#2196F3"
                        Command="{Binding AddCommand}"
                        Content="PÅ™idat"
                        FontWeight="Bold"
                        Foreground="White" />
                </Grid>
            </StackPanel>
        </Border>

        <ScrollViewer Grid.Row="1" Margin="20,0,20,0">
            <ItemsControl ItemsSource="{Binding Items}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border
                            Margin="0,0,0,10"
                            Padding="15"
                            Classes="item"
                            Classes.bought="{Binding IsBought}"
                            CornerRadius="8">

                            <Grid ColumnDefinitions="Auto, *, Auto, Auto">

                                <CheckBox
                                    Grid.Column="0"
                                    Margin="0,0,15,0"
                                    VerticalAlignment="Center"
                                    IsChecked="{Binding IsBought}" />

                                <TextBlock
                                    Grid.Column="1"
                                    VerticalAlignment="Center"
                                    Classes="text"
                                    Classes.bought="{Binding IsBought}"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding Name}"
                                    TextWrapping="Wrap" />

                                <StackPanel
                                    Grid.Column="2"
                                    Margin="10,0,10,0"
                                    VerticalAlignment="Center"
                                    Classes="info"
                                    Classes.bought="{Binding IsBought}"
                                    Orientation="Horizontal"
                                    Spacing="10">

                                    <NumericUpDown
                                        Width="130"
                                        FormatString="0.##"
                                        Increment="1"
                                        Minimum="0"
                                        Value="{Binding Amount}" />

                                    <TextBlock
                                        Width="60"
                                        VerticalAlignment="Center"
                                        FontWeight="Bold"
                                        Text="{Binding Unit}" /> 
                                </StackPanel>

                                <Button
                                    Grid.Column="3"
                                    Padding="10"
                                    VerticalAlignment="Center"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Command="{Binding $parent[UserControl].((vm:ShoppingListViewModel)DataContext).DeleteCommand}"
                                    CommandParameter="{Binding}"
                                    Foreground="#D32F2F">
                                    <TextBlock FontSize="16" Text="âœ•" />
                                </Button>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <Border
            Grid.Row="2"
            Padding="20"
            Background="GhostWhite"
            BorderBrush="#EEE"
            BorderThickness="0,1,0,0">
            <Button
                Padding="20,12"
                HorizontalAlignment="Right"
                Background="#4CAF50"
                Command="{Binding FinishShoppingCommand}"
                CornerRadius="25"
                FontSize="16"
                FontWeight="Bold"
                Foreground="White">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <TextBlock Text="âœ…" />
                    <TextBlock Text="DokonÄit nÃ¡kup (PÅ™esunout do spÃ­Å¾e)" />
                </StackPanel>
            </Button>
        </Border>

    </Grid>
</UserControl>
